## UML		

​		统一建模语言（Unified Modeling Language，UML）是用来设计软件蓝图的可视化建模语言，1997 年被国际对象管理组织（OMG）采纳为面向对象的建模语言的国际标准。它的特点是简单、统一、图形化、能表达软件设计中的动态与静态信息。

`Page-Jones` 在《Fundamental Object-Oriented Design in UML》 一书中总结了UML的主要目的，如下：

1.  为用户提供现成的、有表现力的可视化建模语言，以便他们开发和交换有意义的模型。
2.  为核心概念提供可扩展性 (Extensibility) 和特殊化 (Specialization) 机制。
3.  独立于特定的编程语言和开发过程。
4.  为了解建模语言提供一个正式的基础。
5.  鼓励面向对象工具市场的发展。
6.  支持更高层次的开发概念，如协作，框架，模式和组件。
7.  整合最佳的工作方法 (Best Practices)。

## UML图有哪些

*   UML图分为结构图和行为图。
*   结构图分为类图、轮廓图、组件图、组合结构图、对象图、部署图、包图。
*   行为图又分活动图、用例图、状态机图和交互图。
*   交互图又分为序列图、时序图、通讯图、交互概览图。

### UML图概览

![](..\picture\微信截图_20200926143936.png)

### 类、接口和类图

#### 1. 类

​		类（Class）是指具有相同属性、方法和关系的对象的抽象，它封装了数据和行为，是面向对象程序设计（OOP）的基础，具有封装性、继承性和多态性等三大特性。在 UML 中，类使用包含类名、属性和操作且带有分隔线的矩形来表示。

(1) 类名（Name）是一个字符串，例如，Student。

(2) 属性（Attribute）是指类的特性，即类的成员变量。UML 按以下格式表示

```
[可见性]属性名:类型[=默认值]
```

​		注意：“可见性”表示该属性对类外的元素是否可见，包括公有（Public）、私有（Private）、受保护（Protected）和朋友（Friendly）4 种，在类图中分别用符号+、-、#、~表示。

```
例如：-name:String
```



(3) 操作（Operations）是类的任意一个实例对象都可以使用的行为，是类的成员方法。UML 按以下格式表示：

```
[可见性]名称(参数列表)[:返回类型]
```

```
例如：+display():void。
```

![](..\picture\微信截图_20200926142349.png)

#### 2. 接口

​		接口（Interface）是一种特殊的类，它具有类的结构但不可被实例化，只可以被子类实现。它包含抽象操作，但不包含属性。它描述了类或组件对外可见的动作。在 UML 中，接口使用一个带有名称的小圆圈来进行表示。

![](..\picture\微信截图_20200926142447.png)

#### 3. 类图

​		类图（ClassDiagram）是用来显示系统中的类、接口、协作以及它们之间的静态结构和关系的一种静态模型。它主要用于描述软件系统的结构化设计，帮助人们简化对软件系统的理解，它是系统分析与设计阶段的重要产物，也是系统编码与测试的重要模型依据。

​		类图中的类可以通过某种编程 语言直接实现。类图在软件系统开发的整个生命周期都是有效的，它是面向对象系统的建模中最常见的图。图 3 所示是“计算长方形和圆形的周长与面积”的类图，图形接口有计算面积和周长的抽象方法，长方形和圆形实现这两个方法供访问类调用。

![](..\picture\微信截图_20200926142616.png)

## 类之间的关系

​		在软件系统中，类不是孤立存在的，类与类之间存在各种关系。根据类与类之间的耦合度从弱到强排列，UML 中的类图有以下几种关系：依赖关系、关联关系、聚合关系、组合关系、泛化关系和实现关系。其中泛化和实现的耦合度相等，它们是最强的。

#### 1. 依赖关系

​		依赖（Dependency）关系是一种使用关系，它是对象之间耦合度最弱的一种关联方式，是临时性的关联。在代码中，某个类的方法通过局部变量、方法的参数或者对静态方法的调用来访问另一个类（被依赖类）中的某些方法来完成一些职责。

​		在 UML 类图中，依赖关系使用带箭头的虚线来表示，箭头从使用类指向被依赖的类。图 4 所示是人与手机的关系图，人通过手机的语音传送方法打电话。

![](..\picture\微信截图_20200926142720.png)

#### 2. 关联关系

​		关联（Association）关系是对象之间的一种引用关系，用于表示一类对象与另一类对象之间的联系，如老师和学生、师傅和徒弟、丈夫和妻子等。关联关系是类与类之间最常用的一种关系，分为一般关联关系、聚合关系和组合关系。我们先介绍一般关联。

​		关联可以是双向的，也可以是单向的。在 UML 类图中，双向的关联可以用带两个箭头或者没有箭头的实线来表示，单向的关联用带一个箭头的实线来表示，箭头从使用类指向被关联的类。也可以在关联线的两端标注角色名，代表两种不同的角色。

​		在代码中通常将一个类的对象作为另一个类的成员变量来实现关联关系。图 5 所示是老师和学生的关系图，每个老师可以教多个学生，每个学生也可向多个老师学，他们是双向关联。

![](..\picture\微信截图_20200926142755.png)

#### 3. 聚合关系

​		聚合（Aggregation）关系是关联关系的一种，是强关联关系，是整体和部分之间的关系，是 has-a 的关系。

​		聚合关系也是通过成员对象来实现的，其中成员对象是整体对象的一部分，但是成员对象可以脱离整体对象而独立存在。例如，学校与老师的关系，学校包含老师，但如果学校停办了，老师依然存在。

​		在 UML 类图中，聚合关系可以用带空心菱形的实线来表示，菱形指向整体。图 6 所示是大学和教师的关系图。

![](..\picture\微信截图_20200926142925.png)

#### 4.组合关系

​		组合（Composition）关系也是关联关系的一种，也表示类之间的整体与部分的关系，但它是一种更强烈的聚合关系，是 cxmtains-a 关系。

​		在组合关系中，整体对象可以控制部分对象的生命周期，一旦整体对象不存在，部分对象也将不存在，部分对象不能脱离整体对象而存在。例如，头和嘴的关系，没有了头，嘴也就不存在了。

​		在 UML 类图中，组合关系用带实心菱形的实线来表示，菱形指向整体。图 7 所示是头和嘴的关系图。

![](..\picture\微信截图_20200926143001.png)

#### 5.泛化关系

​		泛化（Generalization）关系是对象之间耦合度最大的一种关系，表示一般与特殊的关系，是父类与子类之间的关系，是一种继承关系，是 is-a 的关系。

​		在 UML 类图中，泛化关系用带空心三角箭头的实线来表示，箭头从子类指向父类。在代码实现时，使用面向对象的继承机制来实现泛化关系。例如，Student 类和 Teacher 类都是 Person 类的子类，其类图如图 8 所示。

![](..\picture\微信截图_20200926143103.png)

#### 6.实现关系

​		实现（Realization）关系是接口与实现类之间的关系。在这种关系中，类实现了接口，类中的操作实现了接口中所声明的所有的抽象操作。

​		在 UML 类图中，实现关系使用带空心三角箭头的虚线来表示，箭头从实现类指向接口。例如，汽车和船实现了交通工具，其类图如图 9 所示。

![](..\picture\微信截图_20200926143137.png)

### 相互之间的区别

***1.聚合与组合***

（1）聚合与组合都是一种结合关系，只是额外具有整体-部分的意涵。

（2）部件的生命周期不同

​		聚合关系中，整件不会拥有部件的生命周期，所以整件删除时，部件不会被删除。再者，多个整件可以共享同一个部件。组合关系中，整件拥有部件的生命周期，所以整件删除时，部件一定会跟着删除。而且，多个整件不可以同时间共享同一个部件。

（3）聚合关系是“has-a”关系，组合关系是“contains-a”关系。

**2.关联和聚合**

（1）表现在代码层面，和关联关系是一致的，只能从语义级别来区分。

（2）关联和聚合的区别主要在语义上，关联的两个对象之间一般是平等的，例如你是我的朋友，聚合则一般不是平等的。

（3）关联是一种结构化的关系，指一种对象和另一种对象有联系。

（4）关联和聚合是视问题域而定的，例如在关心汽车的领域里，轮胎是一定要组合在汽车类中的，因为它离开了汽车就没有意义了。但是在卖轮胎的店铺业务里，就算轮胎离开了汽车，它也是有意义的，这就可以用聚合了。

**3.关联和依赖**

（1）关联关系中，体现的是两个类、或者类与接口之间语义级别的一种强依赖关系，比如我和我的朋友；这种关系比依赖更强、不存在依赖关系的偶然性、关系也不是临时性的，一般是长期性的，而且双方的关系一般是平等的。

（2）依赖关系中，可以简单的理解，就是一个类A使用到了另一个类B，而这种使用关系是具有偶然性的、临时性的、非常弱的，但是B类的变化会影响到A。

**4.泛化和实现**

**实现**表示类对接口的实现关系，表示方式：用一条带有空心三角箭头的虚线指向接口。

**泛化**表示类与类之间的继承关系、接口与接口之间的继承关系，表示方式一条带有空心三角箭头的实线指向基类（父接口）。

**5.综合比较**

这几种关系都是语义级别的，所以从代码层面并不能完全区分各种关系；但总的来说，后几种关系所表现的强弱程度依次为：

**组合>聚合>关联>依赖**

其中依赖（Dependency）的关系最弱，而关联（Association），聚合（Aggregation），组合（Composition）表示的关系依次增强。换言之关联，聚合，组合都是依赖关系的一种，聚合是表明对象之间的整体与部分关系的关联，而组合是表明整体与部分之间有相同生命周期关系的聚合。

而关联与依赖的关系用一句话概括下来就是，依赖描述了对象之间的调用关系，而关联描述了对象之间的结构关系。

### 组件图

*   【概念】描绘了系统中组件提供的、需要的接口、端口等，以及它们之间的关系。
*   【目的】用来展示各个组件之间的依赖关系。

![](..\picture\微信截图_20200926144128.png)

​		订单系统组件依赖于客户资源库和库存系统组件。中间的虚线箭头表示依赖关系。另外两个符号，表示组件连接器，一个提供接口，一个需要接口。

### 部署图

![](..\picture\微信截图_20200926144215.png)

​		图中简单的表示，不同机器上面部署的不同软件。

### 对象图

*   【概念】对象图是类图的一个实例，是系统在某个时间点的详细状态的快照。
*   【目的】用来表示两个或者多个对象之间在某一时刻之间的关系。

![](..\picture\微信截图_20200926144355.png)

​		图中就是描述的，某时间点`bat`这个公司有一个研发部，一个销售部，两个部门只有一个人`iisheng`。

### 包图

*   【概念】描绘了系统在包层面上的结构设计。
*   【目的】用来表示包和包之间的依赖关系。

![](..\picture\微信截图_20200926144459.png)

*   《Use》关系表示使用依赖，`Web Shopping`依赖`Payment`
*   《Merge》关系表示合并，`Web Shopping`合并了`Shopping Cart`就拥有了`Shopping Cart`的功能
*   《Access》关系表示私有引入，比如代码中的指定包名类名
*   《Import》关系表示公共引入，比如Java中的`import`之后，就可以直接使用`import`包中的类了。

### 组合结构图

*   【概念】描述了一个"组合结构"的内部结构，以及他们之间的关系。这个"组合结构"可以是系统的一部分，或者一个整体。
*   【目的】用来表示系统中逻辑上的"组合结构"。

![](..\picture\微信截图_20200926144558.png)

​		图中描述了`Car`是由车轴连接着的两个前面轮子、两个后面轮子，和引擎组合的。

### 轮廓图

*   【概念】轮廓图提供了一种通用的扩展机制，用于为特定域和平台定制UML模型。
*   【目的】用于在特定领域中构建UML模型。

![](..\picture\微信截图_20200926144658.png)

​		图中我们定义了一个简易的`EJB`的概要图。`Bean`是从`Component`扩展来的。`Entity Bean`和`Session Bean`继承了`Bean`。`EJB`拥有`Remote`和`Home`接口，和`JAR`包。

### 用例图

*   【概念】用例图是指由参与者、用例，边界以及它们之间的关系构成的用于描述系统功能的视图。
*   【目的】用来描述整个系统的功能。

![](..\picture\微信截图_20200926144753.png)

用例图中包含以下三种关系：

*   包含关系使用符号《include》，想要查看订单列表，前提是需要先登录。
*   扩展关系使用符号《extend》，基于查询订单列表的功能，可以增加一个导出数据的功能
*   泛化关系，子用例继承父用例所有结构、行为和关系。

### 活动图

*   【概念】描述了具体业务用例的实现流程。
*   【目的】用来表示用例实现的工作流程。

![](..\picture\微信截图_20200926144839.png)

图中简单描述了，从开始到登录到查看订单列表，或者登录失败直接结束。

### 状态机图

*   【概念】状态机图对一个单独对象的行为建模，指明对象在它的整个生命周期里，响应不同事件时，执行相关事件的顺序。
*   【目的】用来表示指定对象，在整个生命周期，响应不同事件的不同状态。

![](..\picture\微信截图_20200926145603.png)

​		图中描述了，门在其生命周期内所经历的状态。

### 序列图

*   【概念】序列图根据时间序列展示对象如何进行协作。它展示了在用例的特定场景中，对象如何与其他对象交互。
*   【目的】通过描述对象之间发送消息的时间顺序显示多个对象之间的动态协作。

![](..\picture\微信截图_20200926145805.png)

​		图中展示的是支付宝条码支付场景的序列图。其中，`loop`是循环，`alt`是选择，序列图的其他关系这里就不介绍了。

### 通讯图

*   【概念】描述了收发消息的对象的组织关系，强调对象之间的合作关系而不是时间顺序。
*   【目的】用来显示不同对象的关系。

![](..\picture\微信截图_20200926145937.png)

​		图中展示了一个线上书店的通讯图，方框和小人表示生命线，不同生命线之间可以传递消息，消息前面的数字可以表达序列顺序。

### 交互概览图

*   【概念】交互概览图与活动图类似，但是它的节点是交互图。
*   【目的】提供了控制流的概述。

![](..\picture\微信截图_20200926150028.png)

​		图中表示一个调度系统的交互概览图，跟活动图很像。其中`sd`的框代表具体的交互流程，`ref`框代表使用交互。

### 时序图

*   【概念】时序图被用来显示随时间变化，一个或多个元素的值或状态的更改。也显示时控事件之间的交互和管理它们的时间和期限约束。
*   【目的】用来表示元素状态或者值随时间的变化而变化的视图。

![](..\picture\微信截图_20200926150109.png)

​		图中展示了老年痴呆病人随着时间的变化病情的变化。