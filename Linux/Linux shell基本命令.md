## 文件系统

Linux下的文件系统主要有ext2、ext3、ext4等文件系统。还支持其他的UNIX文件系统，如XFS、JFS、UFS等，也支持Windows的FAT文件系统和网络文件系统NFS等。

在终端下输入如下命令来查询当前磁盘挂载的是啥文件系统：

```
df -T -h
```

结果如下：框起来的就是我们安装Ubuntu的磁盘，他是ext4类型的。

![](..\picture\微信截图_20200518230430.png)

在Linux下没有C盘、D盘等目录，只有一个根目录，用“/”表示。ubuntu支持多用户，每个用户有一个用户根目录，在登陆系统的时候，系统会默认进入你登陆系统的用户的根目录，他的绝对路径“/home/user/…”user是你的用户名，他其实就是一个文件夹。每次打开终端进入的都是当前用户的根目录。

![](..\picture\微信截图_20200518231403.png)

要进入根目录，使用以下命令即可：

```
cd /
```

![](..\picture\微信截图_20200518231554.png)

我们可以注意到，进入根目录后，终端提示符前面的“~”变成了“/”，这是因为当我们在终端
中切换了目录以后“$”前面就会显示切换以后的目录路径。下面展示了一些根目录下重要的文件夹。

* /bin 存储一些二进制可执行命令文件，/usr/bin 也存放了一些基于用户的命令文件。
* /sbin  存储了很多系统命令，/usr/sbin 也存储了许多系统命令。
* /root  超级用户 root 的根目录文件。
* /home  普通用户默认目录，在该目录下，每个用户都有一个以本用户名命名的文件夹。
* /boot  存放 Ubuntu 系统内核和系统启动文件。
* /mnt 通常包括系统引导后被挂载的文件系统的挂载点。
* /dev 存放设备文件，我们后面学习 Linux 驱动主要是跟这个文件夹打交道的。
* /etc 保存系统管理所需的配置文件和目录。
* /lib 保存系统程序运行所需的库文件，/usr/lib 下存放了一些用于普通用户的库文件。
* /lost+found  一般为空，当系统非正常关机以后，此文件夹会保存一些零散文件。
* /var 存储一些不断变化的文件，比如日志文件
* /usr 包括与系统用户直接有关的文件和目录，比如应用程序和所需的库文件。
* /media  存放 Ubuntu 系统自动挂载的设备文件。
* /proc  虚拟目录，不实际存储在磁盘上，通常用来保存系统信息和进程信息。
* /tmp  存储系统和用户的临时文件，该文件夹对所有的用户都提供读写权限。
* /opt 可选文件和程序的存放目录。
* /sys 系统设备和文件层次结构，并向用户程序提供详细的内核数据信息。

想回到当前用户的根目录，使用以下命令

```
cd ~
```



### 文件操作命令

1. 创建新文件，touch，touch不仅可以创建文本文档，也可以创建其他类型的文件。

```
touch [参数] [文件名]
```

使用touch创建文件的时候，如果[文件名]的文件不存在，那就直接创建一个以[文件名]明明的文件。如果存在，那就仅仅修改一下此文件的最后修改日期。常用的的命令参数如下：

```
-a  只更改存取时间
-c  不建立任何文件
-d<日期>  使用指定日期，而并非现在日期
-t<时间>  使用指定时间，而并非现在时间
```

2. 文件夹创建命令--mkdir

创建文件夹的命令格式如下：

```
mkdir [参数] [文件夹名目录名]
```

主要参数如下：

```
-p	如所要创建的目录其上层目录目前还未创建，那么会一起创建上层目录
```

3. 文件及目录删除命令--rm

此命令可以删除一个文件或多个文件及文件夹，命令格式如下：

```
rm [参数] [目的文件或文件夹]
```

主要参数如下：

```
-d  直接把要删除的目录的硬连接数据删成 0，删除该目录。
-f  强制删除文件和文件夹(目录)。
-i  删除文件或者文件夹(目录)之前先询问用户。
-r  递归删除，指定文件夹(目录)下的所有文件和子文件夹全部删除掉。
-v  显示删除过程。
```

4. 文件夹删除命令--rmdir

rm命令加上“-rf”参数，其实是可以删除文件夹的，但是Linux下也有删除文件夹的相应命令”rmdir”

```
rmdir [参数] [文件夹(目录)]
```

主要参数：

```
-p  删除指定的文件夹(目录)以后，若上层文件夹(目录)为空文件夹(目录)的话就将其一起
删除。
```

5. 文件复制命令--cp

命令格式如下：

```
cp [参数] [源地址] [目的地址]
```

主要参数描述如下：

```
-a  此参数和同时指定“-dpR”参数相同
-d  在复制有符号连接的文件时，保留原始的连接。
-f  强行复制文件，不管要复制的文件是否已经存在于目标目录。
-I  覆盖现有文件之前询问用户。
-p  保留源文件或者目录的属性。
-r  或-R 递归处理，将指定目录下的文件及子目录一并处理
```

6. 文件移动命令--mv

命令格式如下：

```
mv [参数] [源地址] [目的地址]
```

主要参数描述如下：

```
-b  如果要覆盖文件的话覆盖前先进行备份。
-f  若目标文件或目录与现在的文件重复，直接覆盖目的文件或目录。
-I  在覆盖之前询问用户。
```

## 文件压缩和解压缩

1. zip

zip命令是针对.zip文件的，用于将一个或多个文件压缩成一个.zip结尾的文件，命令格式如下：

```
zip [参数] [压缩文件名.zip] [被压缩的文件]
```

主要参数如下

```
-b<工作目录> 指定暂时存放文件的目录
-d 从zip文件中删除一个文件
-F 尝试修复已经损毁的压缩文件
-g 将文件压缩入现有的压缩文件中，不需要新建压缩文件
-h 帮助
-j 只保存文件的名，不保存目录
-m 压缩完成以后删除源文件
-n<字尾符号> 不压缩特定扩展名的文件
-q 不显示压缩命令执行过程
-r 递归压缩，将指定目录下的所有文件和子目录一起压缩
-v 显示指令执行过程
-num 压缩率，为1-9的数值
```

2. unzip

unzip命令主要用于对.zip格式的压缩包进行解压，命令格式如下

```
unzip [参数] [压缩文件名.zip]
```

主要参数如下：

```
-l  显示压缩文件内所包含的文件。
-t 检查压缩文件是否损坏，但不解压。
-v 显示命令显示的执行过程。
-Z 只显示压缩文件的注解。
-C 压缩文件中的文件名称区分大小写。
-j 不处理压缩文件中的原有目录路径。
-L 将压缩文件中的全部文件名改为小写。
-n  解压缩时不要覆盖原有文件。
-P< 密码>  解压密码。
-q  静默执行，不显示任何信息。
-x< 文件列表> 指定不要处理.zip 中的哪些文件。
-d< 目录>  把压缩文件解到指定目录下。
```

3. tar

zip和unzip命令只适用于.zip格式的压缩文件，对于其他格式的用不了，比如Linux下常用的.bz2和.gz这两种压缩格式。其他格式的压缩文件使用tar命令，tar将压缩和解压缩集合在一起，使用不同的参数即可。命令格式如下：

```
tar [参数] [压缩文件名] [被压缩文件名]
```

常用参数如下：

```
-c  创建新的压缩文件。
-C< 目的目录>  切换到指定的目录。
-f< 备份文件> 指定压缩文件。
-j  用 tar 生成压缩文件，然后用 bzip2 进行压缩。
-k  解开备份文件时，不覆盖已有的文件。
-m 还原文件时，不变更文件的更改时间。
-r  新增文件到已存在的备份文件的结尾部分。
-t  列出备份文件内容。
-v  显示指令执行过程。
-w 遭遇问题时先询问用户。
-x  从备份文件中释放文件，也就是解压缩文件。
-z  用 tar 生成压缩文件，用 gzip 压缩。
-Z 用 tar 生成压缩文件，用 compress 压缩
```

例如：

```
压缩
tar -vcjf test1.tar.bz2 test1
tar -vczf test1.tar.gz test1
解压缩
tar -vxjf test1.tar.bz2
tar -vxzf test2.tar.gz
```

### 文件查询和搜索

1. find

find命令用于在目录结构中查找文件，其命令格式如下：

```
find [路径] [参数] [关键字]
```

路径是要查找的目录路径，如果不写的话表示在当前目录下查找，关键字是文件名的一部分，主要参数如下：

```
-name<filename> 按照文件名称查找，查找与 filename 匹配的文件，可使用通配符。
-depth  从指定目录下的最深层的子目录开始查找。
-gid< 群组识别码> 查找符合指定的群组识别码的文件或目录。
-group< 群组名称>  查找符合指定的群组名称的文件或目录。
-size< 文件大小> 查找符合指定文件大小的文件。
-type< 文件类型> 查找符合指定文件类型的文件。
-user< 拥有者名称>  查找符合指定的拥有者名称的文件或目录。
```

2. 命令grep

find 命令用于在目录中搜索文件，我们有时候需要在文件中搜索一串关键字，grep 就是完
成这个功能的，grep 命令用于查找包含指定关键字的文件，如果发现某个文件的内容包含所指
定的关键字，grep 命令就会把包含指定关键字的这一行标记出来，grep 命令格式如下：

```
grep [参数] 关键字 文件列表
```

